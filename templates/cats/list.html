{% extends 'cats/base.html' %}
{% load static %}

{% block content %}

<div class="page-header">
    <h1 class="title">Lost & Found Pets</h1>
    <p class="subtitle">Browse reports and help pets get back home</p>
</div>

<div class="filter-bar smooth-card">
    <form class="filter-form" method="get">
        <input class="search-input" name="q" type="search" placeholder="Search pets..." value="{{ request.GET.q }}">
        
        <select name="status" class="filter-select">
            <option value="">All</option>
            <option value="Lost" {% if request.GET.status == 'Lost' %}selected{% endif %}>Lost</option>
            <option value="Found" {% if request.GET.status == 'Found' %}selected{% endif %}>Found</option>
        </select>

        <button class="btn-filter" type="submit">
            <i class="bi bi-filter"></i> Apply
        </button>
    </form>

    <a href="{% url 'cats:create' %}" class="btn-add">
        <i class="bi bi-plus-circle"></i> Post Something
    </a>
</div>


<div class="posts-grid">
    {% for post in posts %}
    <div class="post-card smooth-card">
        <img src="{{ post.image.url }}" class="post-img" alt="{{ post.title }}">

        <div class="post-body">
            <h3>{{ post.title }}</h3>
            <p><i class="bi bi-geo-alt"></i> {{ post.location }}</p>

            <span class="status {% if post.status == 'Lost' %}lost{% else %}found{% endif %}">
                {{ post.status }}
            </span>

            <a href="{% url 'cats:post_detail' post.pk %}" class="btn-view">View Details</a>
        </div>
    </div>
    {% empty %}
    <p class="text-center mt-5">No posts yet. Be the first to <a href="{% url 'cats:create' %}">add a pet</a>!</p>
    {% endfor %}
</div>

<div class="pagination-wrapper">
    {% if is_paginated %}
    <div class="pagination">
        {% if page_obj.has_previous %}
        <a class="page-btn" href="?page={{ page_obj.previous_page_number }}">Previous</a>
        {% endif %}

        <span class="page-info">Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>

        {% if page_obj.has_next %}
        <a class="page-btn" href="?page={{ page_obj.next_page_number }}">Next</a>
        {% endif %}
    </div>
    {% endif %}
</div>

{% endblock %}
